<link href="__ADMIN__/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
<link href="__ADMIN__/css/plugins/jsTree/style.min.css" rel="stylesheet">
<link href="__ADMIN__/css/animate.min.css" rel="stylesheet">
<link href="__ADMIN__/css/style.min862f.css?v=4.1.0" rel="stylesheet">
<!--[if lt IE 9]><script src="https://static.jstree.com/3.3.4/assets/html5.js"></script><![endif]-->
<link rel="stylesheet" href="https://static.jstree.com/3.3.4/assets/dist/themes/default/style.min.css">
<!--[if lt IE 9]><script src="https://static.jstree.com/3.3.4/assets/respond.js"></script><![endif]-->

<form method="post" class="form-horizontal" action="{:url('authset')}" data-type="ajax" style="padding:30px">
    <input type="hidden" name="id" value="{:input('id',0)}">
    <input type="hidden" id="event_result" name="rules">
    <div id="jstree"></div>

    <div class="form-group" style="margin: 30px 80px">
        <button class="btn btn-primary" type="submit">提交</button>
    </div>
</form>


<script src="__ADMIN__/js/jquery.min.js?v=2.1.4"></script>
<script src="__ADMIN__/js/bootstrap.min.js?v=3.3.6"></script>
<script src="__ADMIN__/js/content.min.js?v=1.0.0"></script>
<script src="__ADMIN__/js/plugins/jsTree/jstree.min.js"></script>

<script>
$(function() {
    $('#jstree').jstree({
        "plugins" : [ "checkbox" ],
        "checkbox" : {
          "keep_selected_style" : false
        },
        "core" : {
           "data" : {$json}
         }
    })
    .on('changed.jstree', function (e, data) {
        var i, j, r = [];
        for(i = 0, j = data.selected.length; i < j; i++) {
          r.push(data.instance.get_node(data.selected[i]).id);
        }
        $('#event_result').val(r.join(','));
    });
});
</script>

<script src="__ADMIN__/js/plugins/layer/layer.min.js"></script>
<script src="__ADMIN__/js/layer_hplus.js"></script>
